<!DOCTYPE html>  
<html>  
<head>  
<meta charset="utf-8">  
<style>  
* {  
  margin: 0;  
  padding: 0;  
  user-select: none;  
}  

body, html {  
  width: 100%;  
  height: 100%;  
  background: 
    radial-gradient(2px 2px at 20px 30px, #eee, transparent),
    radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
    radial-gradient(1px 1px at 90px 40px, rgba(255,255,255,0.6), transparent),
    radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.4), transparent),
    radial-gradient(2px 2px at 160px 30px, rgba(255,255,255,0.6), transparent),
    radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
  background-repeat: repeat;
  background-size: 200px 200px, 200px 200px, 200px 200px, 200px 200px, 200px 200px, 100% 100%;
  overflow: hidden;  
  cursor: none;  
  animation: backgroundMove 120s linear infinite;
}  

.gallery {  
  width: 100%;  
  height: 100%;  
  display: flex;  
  align-items: center;  
  justify-content: center;  
  perspective: 1200px;  
}  

.image-container {  
  position: relative;  
  width: 400px;  
  height: 400px;  
  transform-style: preserve-3d;  
  transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);  
}  

.image-card {  
  position: absolute;  
  width: 100%;  
  height: 100%;  
  border-radius: 15px;  
  overflow: hidden;  
  backface-visibility: visible;  
  box-shadow: 0 20px 40px rgba(0,0,0,0.4),  
              0 0 20px rgba(255,255,255,0.1) inset;  
  transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1),  
              box-shadow 0.8s ease;  
  border: 2px solid rgba(255,255,255,0.1);  
}  

  

.image-card img {  
  width: 100%;  
  height: 100%;  
  object-fit: cover;  
  transition: transform 0.5s ease;  
}  

  

.image-card.exploded {  
  box-shadow: 0 30px 60px rgba(0,0,0,0.6),  
              0 0 40px rgba(255,255,255,0.3) inset,  
              0 0 20px rgba(100,200,255,0.4);  
  border: 3px solid rgba(255,255,255,0.3);  
}  

.small-cube-container {  
  position: absolute;  
  width: 160px;  
  height: 160px;  
  left: 50%;  
  top: 50%;  
  margin-left: -80px;  
  margin-top: -80px;  
  transform-style: preserve-3d;  
  transition: opacity 0.3s ease;  
  opacity: 0;  
  visibility: hidden;  
}  

.small-cube-container.visible {  
  opacity: 1;  
  visibility: visible;  
}  

.small-cube {  
  width: 160px !important;  
  height: 160px !important;  
  border: 2px solid rgba(255,100,100,0.5);  
  box-shadow: 0 15px 30px rgba(255,0,0,0.4),  
              0 0 15px rgba(255,100,100,0.3) inset,  
              0 0 25px rgba(255,50,50,0.6);  
  animation: smallCubePulse 2s ease-in-out infinite alternate;  
}  

@keyframes smallCubePulse {  
  0% {   
    box-shadow: 0 15px 30px rgba(255,0,0,0.4),  
                0 0 15px rgba(255,100,100,0.3) inset,  
                0 0 25px rgba(255,50,50,0.6);  
  }  
  100% {   
    box-shadow: 0 20px 40px rgba(255,0,0,0.6),  
                0 0 25px rgba(255,100,100,0.5) inset,  
                0 0 35px rgba(255,50,50,0.8);  
  }  
}  

.cursor {  
  position: fixed;  
  width: 24px;  
  height: 24px;  
  border-radius: 50%;  
  background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.3) 50%, transparent 100%);  
  box-shadow: 0 0 20px rgba(255,255,255,0.6), 0 0 40px rgba(100,200,255,0.4);  
  pointer-events: none;  
  transform: translate(-50%, -50%);  
  transition: transform 0.1s ease;  
  z-index: 9999;  
  animation: shimmer 2s ease-in-out infinite;  
}  

.cursor-trail {  
  position: fixed;  
  border-radius: 50%;  
  background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, rgba(100,200,255,0.3) 30%, transparent 70%);  
  pointer-events: none;  
  transform: translate(-50%, -50%);  
  z-index: 9998;  
  box-shadow: 0 0 15px rgba(255,255,255,0.3);  
}  

.cursor-trail-1 { width: 18px; height: 18px; transition: all 0.15s ease-out; }  
.cursor-trail-2 { width: 14px; height: 14px; transition: all 0.2s ease-out; }  
.cursor-trail-3 { width: 10px; height: 10px; transition: all 0.25s ease-out; }  

.particle {  
  position: fixed;  
  width: 5px;  
  height: 5px;  
  background: rgba(255,255,255,0.5);  
  border-radius: 50%;  
  pointer-events: none;  
  opacity: 0;  
}  

@keyframes particleAnimation {  
  0% {   
    opacity: 1;  
    transform: scale(1) translate(0, 0);  
  }  
  100% {   
    opacity: 0;  
    transform: scale(3) translate(var(--dx), var(--dy));  
  }  
}  

@keyframes backgroundMove {  
  0% {   
    background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%;  
  }  
  100% {   
    background-position: 200px 200px, -200px 200px, 200px -200px, -200px -200px, 400px 200px, 0% 0%;  
  }  
}  

@keyframes float {  
  0%, 100% { transform: translateY(0px) rotate(0deg); }  
  33% { transform: translateY(-10px) rotate(1deg); }  
  66% { transform: translateY(5px) rotate(-1deg); }  
}  

@keyframes shimmer {  
  0% { opacity: 0.3; }  
  50% { opacity: 0.8; }  
  100% { opacity: 0.3; }  
}  

.floating-element {  
  position: fixed;  
  border-radius: 50%;  
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);  
  pointer-events: none;  
  animation: float 6s ease-in-out infinite;  
}  

.floating-1 {  
  width: 40px;  
  height: 40px;  
  top: 20%;  
  left: 10%;  
  animation-delay: 0s;  
  background: radial-gradient(circle, rgba(100,200,255,0.2) 0%, transparent 70%);  
}  

.floating-2 {  
  width: 60px;  
  height: 60px;  
  top: 60%;  
  right: 15%;  
  animation-delay: 2s;  
  background: radial-gradient(circle, rgba(255,150,255,0.15) 0%, transparent 70%);  
}  

.floating-3 {  
  width: 30px;  
  height: 30px;  
  bottom: 20%;  
  left: 70%;  
  animation-delay: 4s;  
  background: radial-gradient(circle, rgba(150,255,150,0.2) 0%, transparent 70%);  
}  

.floating-4 {  
  width: 50px;  
  height: 50px;  
  top: 30%;  
  right: 40%;  
  animation-delay: 1s;  
  background: radial-gradient(circle, rgba(255,200,100,0.15) 0%, transparent 70%);  
}  
</style>  
</head>  
<body>  
<div class="gallery">  
  <div class="image-container">  
    <!-- 大立方体 - 6个面都显示1.png -->
    <div class="image-card large-cube" style="transform: rotateY(0deg) translateZ(200px)">  
      <img src="1.png" draggable="false">  
    </div>  
    <div class="image-card large-cube" style="transform: rotateY(90deg) translateZ(200px)">  
      <img src="1.png" draggable="false">  
    </div>  
    <div class="image-card large-cube" style="transform: rotateY(180deg) translateZ(200px)">  
      <img src="1.png" draggable="false">  
    </div>  
    <div class="image-card large-cube" style="transform: rotateY(270deg) translateZ(200px)">  
      <img src="1.png" draggable="false">  
    </div>  
    <div class="image-card large-cube" style="transform: rotateX(90deg) translateZ(200px)">  
      <img src="1.png" draggable="false">  
    </div>  
    <div class="image-card large-cube" style="transform: rotateX(-90deg) translateZ(200px)">  
      <img src="1.png" draggable="false">  
    </div>  
    
    <!-- 小立方体 - 中心位置，6个面都显示2.png -->
    <div class="small-cube-container">  
      <div class="image-card small-cube" style="transform: rotateY(0deg) translateZ(80px)">  
        <img src="2.png" draggable="false">  
      </div>  
      <div class="image-card small-cube" style="transform: rotateY(90deg) translateZ(80px)">  
        <img src="2.png" draggable="false">  
      </div>  
      <div class="image-card small-cube" style="transform: rotateY(180deg) translateZ(80px)">  
        <img src="2.png" draggable="false">  
      </div>  
      <div class="image-card small-cube" style="transform: rotateY(270deg) translateZ(80px)">  
        <img src="2.png" draggable="false">  
      </div>  
      <div class="image-card small-cube" style="transform: rotateX(90deg) translateZ(80px)">  
        <img src="2.png" draggable="false">  
      </div>  
      <div class="image-card small-cube" style="transform: rotateX(-90deg) translateZ(80px)">  
        <img src="2.png" draggable="false">  
      </div>  
    </div>  
  </div>  
</div>  

<div class="cursor"></div>  

<!-- 漂浮装饰元素 -->  
<div class="floating-element floating-1"></div>  
<div class="floating-element floating-2"></div>  
<div class="floating-element floating-3"></div>  
<div class="floating-element floating-4"></div>  

<script>  
const container = document.querySelector('.image-container');  
const cursor = document.querySelector('.cursor');  
const gallery = document.querySelector('.gallery');  
const imageCards = document.querySelectorAll('.image-card.large-cube');  
const smallCubeContainer = document.querySelector('.small-cube-container');  
const smallCubeCards = document.querySelectorAll('.image-card.small-cube');  

let mouseX = 0, mouseY = 0;  
let containerRotationX = 0, containerRotationY = 0;  
let currentRotationX = 0, currentRotationY = 0;  
let targetRotationX = 0, targetRotationY = 0;  
let cursorTrails = [];  
let isAutoRotating = true;  
let autoRotationSpeed = 0.3;  
let faceIndex = 0; // 当前面索引  
let isExploded = false; // 是否处于分解状态  
let explodeDistance = 150; // 分解距离  

// 拖拽相关变量  
let isDragging = false;  
let dragStartX = 0, dragStartY = 0;  
let dragRotationX = 0, dragRotationY = 0;  
let lastMouseX = 0, lastMouseY = 0;  

// 自动收起定时器  
let autoCollapseTimer = null;  

function createCursorTrail() {  
  // 创建多层光点轨迹，控制在2cm长度内  
  for (let i = 1; i <= 3; i++) { // 减少到3层  
    const trail = document.createElement('div');  
    trail.classList.add('cursor-trail', `cursor-trail-${i}`);  
    trail.style.left = `${mouseX}px`;  
    trail.style.top = `${mouseY}px`;  
    trail.style.opacity = (4 - i) * 0.2; // 调整透明度  
    document.body.appendChild(trail);  
    
    // 设置较短的存在时间，控制轨迹长度  
    setTimeout(() => {  
      if (trail.parentNode) {  
        trail.remove();  
      }  
    }, 200 + i * 80); // 大幅缩短存在时间  
  }  
}  

function createParticles(x, y) {  
  for (let i = 0; i < 10; i++) {  
    const particle = document.createElement('div');  
    particle.classList.add('particle');  
    particle.style.left = `${x}px`;  
    particle.style.top = `${y}px`;  
    
    const angle = Math.random() * Math.PI * 2;  
    const distance = Math.random() * 50;  
    
    particle.style.setProperty('--dx', `${Math.cos(angle) * distance}px`);  
    particle.style.setProperty('--dy', `${Math.sin(angle) * distance}px`);  
    
    particle.style.animation = 'particleAnimation 1s ease-out';  
    
    document.body.appendChild(particle);  
    
    setTimeout(() => particle.remove(), 1000);  
  }  
}  

function toggleExplodeEffect() {  
  isExploded = !isExploded;  
  
  // 控制大立方体的分解  
  imageCards.forEach((card, index) => {  
    let transform = '';  
    
    if (isExploded) {  
      // 分解状态：各面向外移动并添加视觉效果  
      card.classList.add('exploded');  
      
      switch(index) {  
        case 0: // 前面  
          transform = `rotateY(0deg) translateZ(${200 + explodeDistance}px)`;  
          break;  
        case 1: // 右面  
          transform = `rotateY(90deg) translateZ(${200 + explodeDistance}px)`;  
          break;  
        case 2: // 后面  
          transform = `rotateY(180deg) translateZ(${200 + explodeDistance}px)`;  
          break;  
        case 3: // 左面  
          transform = `rotateY(270deg) translateZ(${200 + explodeDistance}px)`;  
          break;  
        case 4: // 上面  
          transform = `rotateX(90deg) translateZ(${200 + explodeDistance}px)`;  
          break;  
        case 5: // 下面  
          transform = `rotateX(-90deg) translateZ(${200 + explodeDistance}px)`;  
          break;  
      }  
    } else {  
      // 正常状态：恢复原始位置并移除特效  
      card.classList.remove('exploded');  
      
      switch(index) {  
        case 0: // 前面  
          transform = `rotateY(0deg) translateZ(200px)`;  
          break;  
        case 1: // 右面  
          transform = `rotateY(90deg) translateZ(200px)`;  
          break;  
        case 2: // 后面  
          transform = `rotateY(180deg) translateZ(200px)`;  
          break;  
        case 3: // 左面  
          transform = `rotateY(270deg) translateZ(200px)`;  
          break;  
        case 4: // 上面  
          transform = `rotateX(90deg) translateZ(200px)`;  
          break;  
        case 5: // 下面  
          transform = `rotateX(-90deg) translateZ(200px)`;  
          break;  
      }  
    }  
    
    card.style.transform = transform;  
  });  
  
  // 控制小立方体的显示/隐藏  
  if (isExploded) {  
    // 直接出现  
    smallCubeContainer.classList.add('visible');  
  } else {  
    // 直接隐藏  
    smallCubeContainer.classList.remove('visible');  
  }  
}  

function handleMouseDown(e) {  
  isDragging = true;  
  dragStartX = e.clientX;  
  dragStartY = e.clientY;  
  lastMouseX = e.clientX;  
  lastMouseY = e.clientY;  
  
  // 拖拽时停止自动旋转  
  isAutoRotating = false;  
  
  // 阻止默认行为  
  e.preventDefault();  
}  

let lastTrailTime = 0;  

function handleMouseMove(e) {  
  mouseX = e.clientX;  
  mouseY = e.clientY;  
  
  cursor.style.left = `${mouseX}px`;  
  cursor.style.top = `${mouseY}px`;  
  
  // 限制轨迹生成频率，控制轨迹长度  
  const now = Date.now();  
  if (now - lastTrailTime > 80) { // 每80ms最多生成一次轨迹，控制密度  
    createCursorTrail();  
    lastTrailTime = now;  
  }  
  
  if (isDragging) {  
    // 拖拽模式：根据拖拽距离计算旋转  
    const deltaX = e.clientX - lastMouseX;  
    const deltaY = e.clientY - lastMouseY;  
    
    // 累加旋转角度  
    dragRotationY += deltaX * 0.5;  
    dragRotationX -= deltaY * 0.5;  
    
    // 更新目标旋转角度  
    targetRotationX = dragRotationX;  
    targetRotationY = dragRotationY;  
    
    // 更新上一次鼠标位置  
    lastMouseX = e.clientX;  
    lastMouseY = e.clientY;  
  } else {  
    // 非拖拽模式：鼠标移动时停止自动旋转，改为手动控制  
    isAutoRotating = false;  
    
    // 计算鼠标相对于屏幕中心的位置，用于微调旋转  
    containerRotationY = -(mouseX - window.innerWidth / 2) / 50;  
    containerRotationX = (mouseY - window.innerHeight / 2) / 50;  
  }  
}  

function handleMouseUp(e) {  
  isDragging = false;  
  
  // 拖拽结束后1秒恢复自动旋转（只有在组合状态下）  
  setTimeout(() => {  
    if (!isDragging && !isExploded) {  
      isAutoRotating = true;  
    }  
  }, 1000);  
}  

function handleClick(e) {  
  // 检查是否为拖拽操作（如果拖拽距离超过5像素则不触发点击）  
  const dragDistance = Math.sqrt(  
    Math.pow(e.clientX - dragStartX, 2) + Math.pow(e.clientY - dragStartY, 2)  
  );  
  
  createParticles(e.clientX, e.clientY);  
  
  // 只有在非拖拽操作时才能触发切换  
  if (dragDistance < 5) {  
    if (!isExploded) {  
      // 当前是组合状态，执行分解  
      toggleExplodeEffect();  
      isAutoRotating = false;  
      
      // 设置12秒后自动收起的定时器  
      autoCollapseTimer = setTimeout(() => {  
        if (isExploded) { // 确保仍在分解状态  
          toggleExplodeEffect(); // 重新组合  
          setTimeout(() => {  
            isAutoRotating = true; // 恢复自动旋转  
          }, 500);  
        }  
        autoCollapseTimer = null;  
      }, 120000000);  
      
    } else {  
      // 当前是分解状态，手动收起  
      if (autoCollapseTimer) {  
        clearTimeout(autoCollapseTimer); // 取消自动收起定时器  
        autoCollapseTimer = null;  
      }  
      
      toggleExplodeEffect(); // 重新组合  
      setTimeout(() => {  
        isAutoRotating = true; // 恢复自动旋转  
      }, 500);  
    }  
  }  
  // 如果是拖拽操作，点击不做任何操作  
}  

// 添加平滑动画循环  
function animationLoop() {  
  // 自动旋转逻辑  
  if (isAutoRotating) {  
    targetRotationY += autoRotationSpeed;  
  }  
  
  // 平滑插值  
  currentRotationX += (targetRotationX - currentRotationX) * 0.06;  
  currentRotationY += (targetRotationY - currentRotationY) * 0.06;  
  
  // 计算最终旋转角度  
  let finalRotationX = currentRotationX;  
  let finalRotationY = currentRotationY;  
  
  if (isDragging) {  
    // 拖拽模式：直接使用拖拽旋转角度  
    finalRotationX = currentRotationX;  
    finalRotationY = currentRotationY;  
  } else if (!isAutoRotating) {  
    // 鼠标悬停模式：应用鼠标位置微调  
    finalRotationX += containerRotationX * 0.3;  
    finalRotationY += containerRotationY * 0.3;  
  }  
  
  // 应用变换到大立方体容器  
  container.style.transform = `  
    rotateX(${finalRotationX}deg)   
    rotateY(${finalRotationY}deg)  
  `;  
  
  // 小立方体跟随大立方体旋转（相同速度）  
  if (smallCubeContainer.classList.contains('visible')) {  
    smallCubeContainer.style.transform = `  
      rotateX(${finalRotationX}deg)   
      rotateY(${finalRotationY}deg)  
    `;  
  }  
  
  // 光标轨迹现在由 createCursorTrail 函数独立管理  
  
  requestAnimationFrame(animationLoop);  
}  

// 鼠标离开时恢复自动旋转（只有在组合状态下）  
document.addEventListener('mouseleave', () => {  
  setTimeout(() => {  
    if (!isExploded) {  
      isAutoRotating = true;  
    }  
  }, 1000);  
});  

document.addEventListener('mousedown', handleMouseDown);  
document.addEventListener('mousemove', handleMouseMove);  
document.addEventListener('mouseup', handleMouseUp);  
document.addEventListener('click', handleClick);  

// 启动动画循环  
animationLoop();  
</script>  
</body>  
</html>  